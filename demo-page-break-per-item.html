<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo: Page Break Per Item</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="../jspdf-service.js"></script>
</head>
<body>
    <h1>ğŸ¯ Demo: Page Break Per Item</h1>
    <p><strong>Cáº£i tiáº¿n:</strong> Kiá»ƒm tra page break cho tá»«ng item thay vÃ¬ tá»«ng dÃ²ng</p>
    
    <button onclick="demoPageBreakPerItem()" style="background: #4CAF50; color: white; padding: 15px 25px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;">
        ğŸš€ Demo Page Break Per Item
    </button>
    
    <div style="margin-top: 20px; padding: 15px; background: #f0f8ff; border-radius: 5px;">
        <h3>âœ¨ Nhá»¯ng cáº£i tiáº¿n:</h3>
        <ul>
            <li>âœ… <strong>Page break theo item:</strong> Má»—i item Ä‘Æ°á»£c coi nhÆ° má»™t Ä‘Æ¡n vá»‹ hoÃ n chá»‰nh</li>
            <li>âœ… <strong>Æ¯á»›c tÃ­nh chiá»u cao:</strong> TÃ­nh toÃ¡n trÆ°á»›c Ä‘á»ƒ quyáº¿t Ä‘á»‹nh page break</li>
            <li>âœ… <strong>Tá»‘i Æ°u hiá»‡u suáº¥t:</strong> Giáº£m sá»‘ láº§n kiá»ƒm tra khÃ´ng cáº§n thiáº¿t</li>
            <li>âœ… <strong>Layout Ä‘áº¹p hÆ¡n:</strong> Items khÃ´ng bá»‹ cáº¯t Ä‘á»©t má»™t cÃ¡ch xáº¥u xÃ­</li>
        </ul>
    </div>
    
    <script>
        function demoPageBreakPerItem() {
            const pdf = new JsPdfService();
            
            pdf.addTitle("Demo: Page Break Per Item");
            pdf.addSpace(10);
            
            pdf.addText("MÃ´ phá»ng tÃ¬nh huá»‘ng thá»±c táº¿:", null, null, {
                fontSize: 12,
                fontStyle: "bold"
            });
            pdf.addSpace(5);
            
            // Äáº©y content xuá»‘ng gáº§n cuá»‘i trang
            for (let i = 1; i <= 34; i++) {
                pdf.addText(`${i}. Ná»™i dung Ä‘á»ƒ Ä‘áº©y danh sÃ¡ch xuá»‘ng gáº§n cuá»‘i trang`, null, null, {
                    fontSize: 9
                });
            }
            
            pdf.addSpace(8);
            pdf.addText("ğŸ“‹ DANH SÃCH Vá»šI PAGE BREAK Tá»I Æ¯U:", null, null, {
                fontSize: 12,
                fontStyle: "bold",
                color: [0, 100, 0],
                align: "center"
            });
            pdf.addSpace(5);
            
            // Danh sÃ¡ch sáº½ test page break per item
            pdf.addNumberedList([
                "Item ngáº¯n Ä‘áº§u tiÃªn",
                
                "Item dÃ i thá»© hai: ÄÃ¢y lÃ  má»™t item cÃ³ ná»™i dung ráº¥t dÃ i Ä‘á»ƒ test kháº£ nÄƒng page break per item. Vá»›i cÃ¡ch tiáº¿p cáº­n má»›i, toÃ n bá»™ item nÃ y sáº½ Ä‘Æ°á»£c Æ°á»›c tÃ­nh chiá»u cao trÆ°á»›c, sau Ä‘Ã³ quyáº¿t Ä‘á»‹nh cÃ³ cáº§n chuyá»ƒn trang hay khÃ´ng. Äiá»u nÃ y Ä‘áº£m báº£o item khÃ´ng bá»‹ cáº¯t Ä‘á»©t má»™t cÃ¡ch xáº¥u xÃ­ giá»¯a cÃ¡c trang.",
                
                "Item thá»© ba vá»«a pháº£i: Ná»™i dung nÃ y cÃ³ Ä‘á»™ dÃ i trung bÃ¬nh Ä‘á»ƒ táº¡o sá»± Ä‘a dáº¡ng trong test case vÃ  kiá»ƒm tra tÃ­nh á»•n Ä‘á»‹nh cá»§a thuáº­t toÃ¡n page break má»›i.",
                
                "Item thá»© tÆ° ráº¥t dÃ i: " + "Lorem ipsum dolor sit amet, consectetur adipiscing elit. ".repeat(10) + "Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.",
                
                "Item cuá»‘i ngáº¯n gá»n"
            ], {
                itemOptions: {
                    fontSize: 10,
                    align: "justify",
                    numberStyle: "decimal"
                }
            });
            
            pdf.addSpace(15);
            pdf.addText("âœ… Káº¿t quáº£: Má»—i item Ä‘Æ°á»£c xá»­ lÃ½ nhÆ° má»™t Ä‘Æ¡n vá»‹ hoÃ n chá»‰nh!", null, null, {
                fontSize: 11,
                color: [0, 150, 0],
                fontStyle: "bold",
                align: "center"
            });
            
            pdf.previewPDF();
        }
        
        console.log("Demo Page Break Per Item ready!");
        console.log("Key improvements:");
        console.log("1. Pre-calculate item height");
        console.log("2. Check page break per item (not per line)");
        console.log("3. Treat items as complete units");
        console.log("4. Optimize performance");
    </script>
</body>
</html>